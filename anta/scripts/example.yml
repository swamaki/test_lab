
---
tenant_prod:
  - name: VRF_PROD
    #bgp_peer_groups:
      # Customer uses static routing

    vrfs:
      # ------------------------------------------------- #
      # MARK: VRF_PROD VRF
      # ------------------------------------------------- #
      - name: "VRF_PROD"
        vrf_id: 36
        svis:
          - id: 36
            name: "VRF_PROD_Hosts"
            description: "Immediate Payments - VRF Prod Hosts"
            enabled: true
            vxlan: false
            nodes:
              - node: "edgeswitch01"
                ip_address: "10.177.132.162/27"
                ip_virtual_router_addresses:
                  - "10.177.132.161"
              - node: "edgeswitch02"
                ip_address: "10.177.132.163/27"
                ip_virtual_router_addresses:
                  - "10.177.132.161"

          - id: 136
            name: "VRF_PROD_FW"
            description: "VRF Prod FW Conn"
            enabled: true
            vxlan: false
            nodes:
              - node: "edgeswitch01"
                ip_address: "10.18.25.66/28"
                ip_virtual_router_addresses:
                  - "10.18.25.1"
              - node: "edgeswitch02"
                ip_address: "10.18.25.67/28"
                ip_virtual_router_addresses:
                  - "10.18.25.1"

        bgp_peers:
          - ip_address: "10.18.25.69"
            peer_group: "LON_Cust_FW"
            description: "London Stet Prod Cust FW Peer"
            route_map_in: "RM_VRF_PROD_IN"
            route_map_out: "RM_VRF_PROD_OUT"
            nodes:
              - "edgeswitch01"

          - ip_address: "10.18.25.70"
            peer_group: "LON_Cust_FW"
            description: "London Stet Prod Cust FW Peer"
            route_map_in: "RM_VRF_PROD_IN"
            route_map_out: "RM_VRF_PROD_OUT"
            nodes:
              - "edgeswitch02"

        structured_config:
          route_maps:
            - name: "RM_VRF_PROD_IN"
              sequence_numbers:
                - sequence: 10
                  type: "permit"
                  description: "Allow Routes Out To Stet"
                  match:
                    - "ip address prefix-list PL_VRF_PROD_IN"
            - name: "RM_VRF_PROD_OUT"
              sequence_numbers:
                - sequence: 10
                  type: "permit"
                  description: "Allow Stet Routes Out"
                  match:
                    - "ip address prefix-list PL_VRF_OUT"
          prefix_lists:
            - name: "PL_VRF_PROD_IN"
              sequence_numbers:
                - sequence: 10
                  action: "permit 10.177.132.160/27 le 32"
            - name: "PL_VRF_OUT"
              sequence_numbers:
                - sequence: 10
                  action: "permit 10.18.0.0/16 le 32"

# ------------------------------------------------------- #
# MARK: VRF_PROD Endpoints
# ------------------------------------------------------- #
stet_prod_endpoints:
  - name: "VRF PROD"
    adapters:
      - switch_ports:
          - "Ethernet36"
          - "Ethernet36"
        endpoint_ports:
          - "HOST-2 Cab 26 34U"
          - "HOST-3 CAB 28 34U"
        switches:
          - "edgeswitch01"
          - "edgeswitch02"
        mode: access
        vlans: 36
        structured_config:
          lldp:
            transmit: false
            receive: false
